<view:BasketViewClass xmlns="http://www.w3.org/1999/xhtml"
                      xmlns:js="js.core" xmlns:ui="js.ui"
                      xmlns:view="hip.view">

    <div class="header">
        <a class="back-btn" onclick="closeBasket">
            <i class="fa fa-times"/>
        </a>
        <h1 class="header__logo"/>
        <h2>{i18n.t('basket.basket')}</h2>
    </div>

    <div class="basket__content" visible="{basketStore.basket}" cid="content" onclick="stopPropagation">
        <ui:ItemsView class="basket__items" items="{basket.basketItems}">
            <js:Template name="item">
                <div class="basket__item">
                    <a class="basket__item-image" onclick="_editBasketItem(item, event)">
                        <img src="{basketStore.getProductImage(item)}"/>
                    </a>
                    <div class="basket__item-options">

                        <div class="basket__item-actions">
                            <a onclick="_cloneItem(item)">
                                <i class=" fa fa-files-o"/>
                            </a>
                            <a onclick="_removeItem(item)">
                                <i class=" fa fa-trash"/>
                            </a>
                        </div>

                        <!--<div class="basket__item-description">-->
                        <!--{item.product.description}-->
                        <!--</div>-->
                        <div class="basket__item-size">
                            <div class="btn btn-whitesmoke">
                                <view:FastSelect emptyOptionText="${i18n.t('product.chooseSize')}"
                                                 emptyOption="true"
                                                 items="{basketStore.getSizes(item)}"
                                                 enableAutoFillCheck="false"
                                                 selectedItem="{basketStore.getSize(item)}"
                                                 onchange="_updateSize(item, event)"
                                                 valuePath="id"/>
                                <i class=" fa fa-angle-down pull-right"/>
                            </div>
                        </div>
                        <div class="basket__item-quantity">
                            <input type="tel" value="{item.quantity}"
                                   onkeyup="_handleQuantityKeyUp"
                                   onblur="_handleQuantityChange(item,event)"/>
                        </div>
                        <div class="basket__item-price">
                            {basketStore.formatPrice(item.priceItem, 'display', item.quantity)}
                        </div>
                    </div>
                </div>
            </js:Template>
        </ui:ItemsView>
    </div>

    <div class="basket__footer" visible="{basketStore.basket}">
        <div class="basket__summary" volumeDiscount="{basketStore.volumeDiscount(basket)}" total="{basketStore.totalPrice(basket)}">
            <div visible="{volumeDiscount}" class="basket__subtotal-price">
                <label>
                    {i18n.t('basket.subTotal')}
                    <br/>
                </label>
                <div >
                    <div>{basketStore.formatPrice(basket.priceItems)}</div>
                </div>
            </div>
            <div visible="{volumeDiscount}" class="basket__discount-price">
                <label>
                    {i18n.t('basket.volumeDiscount')}
                    <br/>
                </label>
                <div >
                    <div>-{basketStore.formatPrice(volumeDiscount.price)}</div>
                </div>
            </div>
            <div>
                <label>
                    {i18n.t('basket.total')}
                    <br/>
                </label>
                <div class="basket__total-price">
                    <div>{basketStore.formatPrice(total)}</div>
                </div>
            </div>

        </div>
        <div class="basket__btn-wrapper">
            <a class="btn btn-orange" onclick="checkout">
                <i class=" fa fa-shopping-cart"/>
                {i18n.t('basket.toCheckout')}
            </a>
        </div>
    </div>

    <div class="basket__empty" visible="{and(not(basketStore.loadingBasket),not(basket))}">
        <p>{i18n.t('basket.isEmpty')}</p>
        <a class="btn btn-orange" onclick="goCreate">{i18n.t('basket.startCreate')}</a>
    </div>


</view:BasketViewClass>