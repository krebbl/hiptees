<view:BasketViewClass xmlns="http://www.w3.org/1999/xhtml"
                      xmlns:js="js.core" xmlns:ui="js.ui"
                      xmlns:view="hip.view"
                      onclick="closeBasket">

    <div class="basket__header">
        <a class="back-btn" onclick="closeBasket">
            <i class="fa fa-times"/>
        </a>
        <h2>{i18n.t('basket.basket')}</h2>
    </div>


    <div class="basket__loading" visible="{and(basketStore.loadingBasket, not(basketStore.updatingBasket))}"/>

    <div class="basket__updating" visible="{basketStore.updatingBasket}"/>

    <div class="basket__content" visible="{basketStore.basket}" cid="content" onclick="stopPropagation">
        <ui:ItemsView class="basket__items" items="{basket.basketItems}">
            <js:Template name="item">
                <div class="basket__item">
                    <a class="basket__item-image" onclick="_editBasketItem(item, event)">
                        <img src="{basketStore.getProductImage(item)}"/>
                    </a>
                    <div class="basket__item-options">
                        <div class="basket__item-price">
                            {basketStore.formatPrice(item.priceItem)}
                        </div>
                        <!--<div class="basket__item-description">-->
                        <!--{item.product.description}-->
                        <!--</div>-->
                        <div class="basket__item-size">
                            <label>${i18n.t('general.size')}:</label>
                            <div class="btn btn-whitesmoke">
                                <view:FastSelect emptyOptionText="${i18n.t('product.chooseSize')}"
                                                 emptyOption="true"
                                                 items="{basketStore.getSizes(item)}"
                                                 enableAutoFillCheck="false"
                                                 selectedItem="{basketStore.getSize(item)}"
                                                 onchange="_updateSize(item, event)"
                                                 valuePath="id"/>
                                <i class=" fa fa-angle-down pull-right"/>
                            </div>
                        </div>
                        <div class="basket__item-quantity">
                            <label>${i18n.t('general.quantity')}:</label>
                            <input type="tel" value="{item.quantity}"
                                   onkeyup="_handleQuantityKeyUp"
                                   onblur="_handleQuantityChange(item,event)"/>
                        </div>
                        <div class="basket__item-actions">
                            <a onclick="_cloneItem(item)">
                                <i class=" fa fa-files-o"/>
                            </a>
                            <a onclick="_removeItem(item)">
                                <i class=" fa fa-trash"/>
                            </a>
                        </div>
                    </div>
                </div>
            </js:Template>
        </ui:ItemsView>
    </div>

    <div class="basket__footer" visible="{basketStore.basket}">
        <div class="basket__summary">
            <label>
                {i18n.t('basket.subTotalWithoutShipping')}<br/>
                {basketStore.totalQuantity()} {i18n.t('general.article')}
            </label>
            <div class="basket__total-price">
                <div>{basketStore.formatPrice(basket.priceItems)}</div>
            </div>
        </div>
        <div class="basket__btn-wrapper">
            <a class="btn btn-orange" onclick="checkout">
                <i class="fa fa-external-link fa-pull-left" style="margin-right: -100%"/>
                {i18n.t('basket.toCheckout')}
                <i class="fa fa-spinner fa-spin fa-pull-right" style="margin-left: -100%" visible="{checkingOut}"/>
            </a>
        </div>
    </div>

    <div class="basket__empty" visible="{and(not(basketStore.loadingBasket),not(basket))}">
        <p>{i18n.t('basket.isEmpty')}</p>
        <a class="btn btn-orange" onclick="goCreate">{i18n.t('basket.startCreate')}</a>
    </div>


</view:BasketViewClass>