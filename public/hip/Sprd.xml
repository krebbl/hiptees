<?xml version="1.0"?>
<hip:SprdClass
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:js="js.core" xmlns:hip="hip" xmlns:view="hip.view"
        xmlns:svg="hip.svg" xmlns:util="hip.util"
        xmlns:data="hip.data" xmlns:conf="js.conf" xmlns:module="hip.module" xmlns:dialog="hip.dialog"
        xmlns:tracking="hip.tracking" xmlns:store="hip.store" xmlns:action="hip.action">

    <js:Injection cid="injection">
        <js:I18n cid="i18n" path="hip/locale" locale="de"/>
        <data:SprdDataSource cid="sprdApi" gateway="/api/v1" apiKey="{ENV().apiKey}" secret="{ENV().secret}"
                             endPoint="{ENV().endPoint}"/>
        <data:HipDataSource cid="api" gateway="/hapi/v1" endPoint="{endpoint()}"/>
        <util:CloudinaryImageUploader/>
        <util:ImageFileReader/>
        <util:Memento cid="memento"/>
        <svg:TextMeasurer/>
        <action:Executor cid="executor"/>

        <action:NavigationActions cid="navigationActions"/>
        <action:BasketActions/>
        <action:ProductActions/>
        <action:PresetActions/>
        <action:TextFlowActions/>

        <store:LoggerStore cid="loggerStore"/>
        <store:NavigationStore cid="navigationStore"/>
        <store:ProductStore cid="productStore"/>
        <store:BasketStore cid="basketStore"/>
        <store:TextFlowStore cid="textFlowStore"/>
        <store:PresetStore cid="presetStore"/>

        <tracking:Google/>
        <tracking:Omniture/>
        <tracking:TrackingManager cid="trackingManager"/>

        <svg:TextEditor cid="textEditor" class="needsclick"/>
        <view:ImageFilterRenderer/>
        <js:NotificationManager cid="notificationManager">
            <js:Template name="default">
                <div animationClass="notifications__message" class="notifications__message">
                    <p>{message}</p>
                </div>
            </js:Template>
            <js:Template name="error">
                <div animationClass="notifications__message" class="notifications__message error">
                    <p>{message}</p>
                </div>
            </js:Template>
        </js:NotificationManager>
        <dialog:ConfirmDialog/>
    </js:Injection>

    <js:Router cid="router">
        <conf:RouteConfiguration route="^$" onexec="defaultRoute"/>
        <!--<conf:RouteConfiguration route="presets" onexec="presetsRoute" />-->
        <!--<conf:RouteConfiguration route="create\/(\w+)" onexec="createRoute"/>-->
        <!--<conf:RouteConfiguration route="basket\/(\w+)" onexec="basketRoute"/>-->
    </js:Router>

    <div class="slide-container">
        <view:BasketView cid="basketView" selected="{navigationStore.isMenuActive('basket')}" onclose="_handleBasketClose"/>
        <!--<view:ProductOptionsView cid="productOptionsView"/>-->
        <!--<view:ProfileOptionsView cid="profileOptionsView"/>-->
    </div>

    <div class="module-container" visible="{started}">
        <module:EditorModule cid="editorModule"/>
    </div>

</hip:SprdClass>