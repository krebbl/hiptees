<parent:EditorModuleClass xmlns="http://www.w3.org/1999/xhtml"
                          xmlns:parent="hip.module" xmlns:svg="hip.svg" xmlns:view="hip.view" xmlns:ui="js.ui"
                          xmlns:js="js.core" class="module {loadingClass()}">

    <div class="header">
        <h1 class="header__logo"/>
        <h2>Spreadshirt</h2>
        <view:MiniBasketButton class="header__btn btn-right" onclick="showMenu('basket')" visible="{basketStore.basket}"/>
    </div>


    <div class="content {appearanceClass()} content__editor {zoomClass()}" cid="content">
        <div class="undo-redo-buttons">
            <a onclick="undo" enabled="{memento.hasUndoState()}">
                <i class="fa fa-undo"/>
            </a>
            <a onclick="redo" enabled="{memento.hasRedoState()}">
                <i class="fa fa-repeat"/>
            </a>
        </div>

        <a class="zoom-btn" onclick="toggleZoom" selected="{zoomVisible}">
            <i class="fa fa-search-plus" visible="{not(zoomed)}"/>
            <i class="fa fa-search-minus" visible="{zoomed}"/>
        </a>

        <div class="configuration-info" selected="{showConfigurationInfo}">
            <div>
                <div visible="{configurationViewer._moving}">
                    X: {format(configurationViewer._realOffset.x)} mm
                    Y: {format(configurationViewer._realOffset.y)} mm
                </div>
                <div visible="{not(configurationViewer._moving)}">
                    B: {format(configurationViewer._size.width)} mm
                    H: {format(configurationViewer._size.height)} mm
                </div>
            </div>
        </div>

        <div cid="innerContent" class="inner-content" heightUpdatePolicy="in" height="100%" visible="{product}">
            <div class="product-viewer-wrapper" cid="wrapper"
                 height="{height}"
                 width="{height}"
                 marginLeft="{minusHalf(width)}px"
                 left="50%"
                 onclick="showMenu('')">
                <svg:ProductViewer cid="productViewer" height="{height}" width="{height}" product="{product}"/>
            </div>
        </div>
    </div>

    <div class="loading-layer" visible="{or(productStore.loading,textFlowStore.loadingFont)}"/>

    <div class="footer">
        <a class="footer__btn footer__template-btn" onclick="showMenu('options')">
            <i class="fa fa-bars"/>
            MENU
        </a>

        <a class="footer__btn footer__add-btn" onclick="showMenu('add')">
            <i class="fa fa-plus"/>
        </a>


        <a class="footer__btn footer__buy-btn" onclick="showMenu('buy')"
           enabled="{not(product.configurations.isEmpty())}">
            <i class="fa fa-shopping-cart"/>
            ${i18n.t('editor.buy')}
        </a>

    </div>

    <div class="setting-views" selected="{navigationStore.isMenuActive('settings')}">
        <view:TextSettingsView oncloseClicked="showMenu('')"/>
        <view:ImageSettingsView oncloseClicked="showMenu('')"/>
        <view:ShapeSettingsView oncloseClicked="showMenu('')"/>
    </div>

    <input cid="fileInput" type="file" onchange="handleUpload"/>

    <view:ProductPresetsView selected="{navigationStore.isMenuActive('presets')}"
                             closable="{productStore.product}"
                             oncloseClicked="showMenu()"/>

    <div class="add-view" selected="{navigationStore.isMenuActive('add')}">
        <div>
            <a onclick="add('text',event)">
                <i class="fa fa-font"/>
                ${i18n.t('editor.addText')}
            </a>
            <a onclick="add('image')" class="needsclick">
                <i class="fa fa-picture-o needsclick"/>
                ${i18n.t('editor.addImage')}
            </a>
            <a onclick="add('rectangle')">
                <i class="fa fa-stop"/>
                ${i18n.t('editor.addRectangle')}
            </a>
            <a onclick="add('circle')">
                <i class="fa fa-circle"/>
                ${i18n.t('editor.addCircle')}
            </a>
            <a onclick="add('heart')">
                <i class="fa fa-heart"/>
                ${i18n.t('editor.addHeart')}
            </a>
            <a onclick="add('star')">
                <i class="fa fa-star"/>
                ${i18n.t('editor.addStar')}
            </a>
        </div>
    </div>

    <div class="menu-view" selected="{navigationStore.isMenuActive('options')}">
        <div>
            <a onclick="showMenu('presets')">
                <i class="fa fa-magic"/>
                ${i18n.t('menu.startNewAgain')}
            </a>
            <a>
                <i class="fa fa-bullhorn"/>
                ${i18n.t('menu.giveFeedback')}
            </a>
            <a>
                <i class="fa fa-external-link"/>
                ${i18n.t('menu.legalAndPrivacy')}
            </a>
        </div>
    </div>

    <div class="loading-overlay" visible="{or(productStore.savingProduct,basketStore.updatingBasket)}">
        <div class="loading-overlay__box">
            <div class="loading-overlay__message">
                {_loadingMessage}
            </div>
        </div>
    </div>

    <div class="buy-view" selected="{navigationStore.isMenuActive('buy')}">
        <table selected="{sizeTableSelected}" class="size-table-view__table" border="1" cellpadding="4">
            <thead>
                <tr>
                    <th>
                        <b>${i18n.t('general.size')}</b>
                    </th>
                    <th>
                        <b>${i18n.t('sizeTable.length')}</b>
                    </th>
                    <th>
                        <b>${i18n.t('sizeTable.brust')}</b>
                    </th>
                </tr>
                <tr>
                    <th/>
                    <th>CM</th>
                    <th>CM</th>
                </tr>
            </thead>
            <tbody>
                <js:Repeat items="{product.productType.sizes}" itemKey="size">
                    <js:Template name="item">
                        <tr>
                            <td>
                                <b>{size.name}</b>
                            </td>
                            <td>{mmToMm(size.measures.[0].value.value)}</td>
                            <td>{mmToMm(size.measures.[1].value.value)}</td>
                        </tr>
                    </js:Template>
                </js:Repeat>
            </tbody>
        </table>
        <div>
            <label class="buy-view__label">
                ${i18n.t('editor.chooseSize')}
                <a onclick="toggleSizeTable()">${i18n.t('editor.sizeTable')}</a>
            </label>
            <ui:SelectionView class="buy-view__size-list" items="{product.productType.sizes}"
                              itemKey="size" tagName="ul" selectedItem="{productStore.selectedSize}">
                <js:Template name="item">
                    <li class="buy-view__size-list-item" onclick="selectSize(size)">
                        <div>{size.name}</div>
                    </li>
                </js:Template>
            </ui:SelectionView>

            <a class="btn btn-orange" enabled="{and(productStore.selectedSize,not(basketStore.loadingBasket))}" onclick="addToBasket">
                ${i18n.t('editor.addToBasket')}
            </a>
        </div>
    </div>

</parent:EditorModuleClass>